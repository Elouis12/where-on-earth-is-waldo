<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Create Password | Where on Earth is Waldo?</title>
  <link type="text/css" rel="stylesheet" href="/css/register.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"/>

  <!-- JS -->
  <script type="module" >

    import {UserAuthAPI} from '/js/userAuthAPI.js'

    // document.body.classList.add('hide');

    let userAuthAPI = new UserAuthAPI();

    window.addEventListener('load', userAuthAPI.verifyResetToken.bind() );

    let passwordIcons = document.getElementsByClassName('password-icon');

    // allow users to see password
    for( let x = 0; x < passwordIcons.length; x++ ){

      passwordIcons[x].addEventListener('click', ()=>{

        if( passwordIcons[x].parentElement.children[1].getAttribute('type') === 'password' ){

          passwordIcons[x].parentElement.children[1].setAttribute('type', 'text')

        }else{

          passwordIcons[x].parentElement.children[1].setAttribute('type', 'password')

        }
      })

    }

  </script>


</head>
<body>

<main class="container">

  <form class="register-container">

    <div class="register-items">

      <div class="register-items-header">
        <h1 id="header-title" class="header-title">Reset Password</h1>
      </div>

      <div id="input-container" class="input-container">

        <div class="input-container-items" >

          <div class="icon-container password-icon">
            <i class="input-icon fa-solid fa-key"></i>
          </div>
          <input id="reset-password" class="account-input" type="password" placeholder="Password" />


          <div class="issue-container">
            <i class="fa-solid fa-exclamation-circle hideVisibility"></i>
            <span class="issue-message hideVisibility"></span>
          </div>

        </div>

        <div class="input-container-items" >

          <div class="icon-container password-icon">
            <i class="input-icon fa-solid fa-key"></i>
          </div>
          <input id="reset-password-confirmation" class="account-input" type="password" placeholder="Confirm password" />


          <div class="issue-container">
            <i class="fa-solid fa-exclamation-circle hideVisibility"></i>
            <span class="issue-message hideVisibility"></span>
          </div>

        </div>

        <input id="create-password-button" type="button" class="reset-password-button" value="Reset Password">

        <input id="invalid-request-button" type="button" class="reset-password-button hide" value="Reset Password" onclick="window.location.href= '/reset-password'">

        <p id="password-reset-text" class="password-reset-text hideVisibility">Your Password has Been reset!</p>

      </div>


    </div>

    <script type="text/javascript" src="/js/ForgotPassword.js"></script>
<!--    <script type="module" src="/js/ForgotPassword.js"></script>-->

  </form>

</main>



</body>
</html>